(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5410:function(){},8628:function(){},1601:function(){},7792:function(){},4977:function(){},5042:function(){},8927:function(e,t,n){Promise.resolve().then(n.bind(n,8709))},8709:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Home}});var r=n(230),a=n(7437),i=n(802),u=n(245),c=n(2265),l=n(7793);let useSquare=e=>{let{squareIndex:t}=e,{game:n,stateListener:r,gameListener:a}=(0,l.u)(),[i,u]=(0,c.useState)(n.getSquareViewModel(t));(0,c.useEffect)(()=>{let listener=e=>{u(e)};return r.onSquareViewModel(t,listener),()=>{r.removeSquareViewModelListener(t,listener)}},[t,r]);let s=(0,c.useCallback)(()=>{a.emitClickEvent({type:"BOARD",squareIndex:t})},[t,a]);return{clickBoard:s,square:i}};var s=n(2710);function _templateObject(){let e=(0,r._)(["\n    width: 100px;\n    height: 100px;\n    border: 1px solid black;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 40px;\n    position: relative;\n    ",";\n    ",";\n"]);return _templateObject=function(){return e},e}function _templateObject1(){let e=(0,r._)(["\n    position: absolute;\n    ",";\n    ",";\n    width: 10px;\n    height: 10px;\n    border-radius: 50%;\n    ",";\n"]);return _templateObject1=function(){return e},e}let Square=e=>{let{squareIndex:t}=e,{square:n,clickBoard:r}=useSquare({squareIndex:t});return(0,a.jsxs)(o,{$clickable:n.state,$player:(0,s.y3)(n.piece)?"ME":"OPPONENT",onClick:r,children:[pieceStringParser(n.piece),pieceDotChanger(n.piece).map((e,t)=>(0,a.jsx)(p,{$x:e[0],$y:e[1],$player:(0,s.y3)(n.piece)?"ME":"OPPONENT"},t+"_"+n.piece+"_dot_"+e[0]+"_"+e[1]))]})},pieceStringParser=e=>{switch(e){case u.E_:return"";case u.xw:return"L";case u.OS:return"E";case u.Vg:return"G";case u.ZI:return"C";case u.Pn:return"H";case u.D_:return"l";case u.zq:return"e";case u.Dx:return"g";case u.Xs:return"c";case u.mh:return"h"}},pieceDotChanger=e=>{switch(e){case u.E_:return[];case u.xw:case u.D_:return[[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],[-1,1],[0,1],[1,1]];case u.OS:case u.zq:return[[-1,-1],[1,-1],[-1,1],[1,1]];case u.Vg:case u.Dx:return[[0,-1],[-1,0],[1,0],[0,1]];case u.ZI:return[[0,-1]];case u.Xs:return[[0,1]];case u.Pn:return[[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],[0,1]];case u.mh:return[[0,-1],[-1,0],[1,0],[-1,1],[0,1],[1,1]]}},o=i.ZP.div(_templateObject(),e=>"clickable"===e.$clickable?"background-color: pink":"selecting"===e.$clickable?"background-color: palegreen":"",e=>"ME"===e.$player?"color: black":"color: red"),p=i.ZP.div(_templateObject1(),e=>{switch(e.$y){case -1:return"top: 5px";case 0:return"";case 1:return"bottom: 5px"}},e=>{switch(e.$x){case -1:return"left: 5px";case 0:return"";case 1:return"right: 5px"}},e=>"ME"===e.$player?"background-color: black":"background-color: red");function Board_templateObject(){let e=(0,r._)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n"]);return Board_templateObject=function(){return e},e}function Board_templateObject1(){let e=(0,r._)(["\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n"]);return Board_templateObject1=function(){return e},e}let Board=()=>(0,a.jsx)(d,{children:[0,1,2,3].map(e=>(0,a.jsx)(f,{children:[0,1,2].map(t=>(0,a.jsx)(Square,{squareIndex:3*e+t},"square_"+e+"_"+t))},"row_"+e))}),d=i.ZP.div(Board_templateObject()),f=i.ZP.div(Board_templateObject1()),useCaptured=e=>{let{capturedIndex:t}=e,{game:n,stateListener:r,gameListener:a}=(0,l.u)(),[i,u]=(0,c.useState)(n.getCapturedViewModel(t));(0,c.useEffect)(()=>{let listener=e=>{u(e)};return r.onCapturedViewModel(t,listener),()=>{r.removeCapturedViewModelListener(t,listener)}},[t,r]);let s=(0,c.useCallback)(()=>{a.emitClickEvent({type:"CAPTURED",capturedIndex:t})},[t,a]);return{captured:i,clickCaptured:s}};function Captured_templateObject(){let e=(0,r._)(["\n    position: relative;\n"]);return Captured_templateObject=function(){return e},e}function Captured_templateObject1(){let e=(0,r._)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 40px;\n    width: 50px;\n    height: 50px;\n    ","\n"]);return Captured_templateObject1=function(){return e},e}function _templateObject2(){let e=(0,r._)([""]);return _templateObject2=function(){return e},e}function _templateObject3(){let e=(0,r._)(["\n    position: absolute;\n    top: 0;\n    right: 0;\n"]);return _templateObject3=function(){return e},e}let Captured=e=>{let{capturedIndex:t}=e,{captured:n,clickCaptured:r}=useCaptured({capturedIndex:t});return 0===n.amount?(0,a.jsx)(x,{}):(0,a.jsxs)(m,{onClick:r,children:[(0,a.jsx)(h,{$selecting:"selecting"===n.state,children:capturedStringParse(t)}),(0,a.jsx)(_,{children:n.amount})]})},capturedStringParse=e=>{switch(e){case u.bD:return"E";case u.IH:return"G";case u.Ah:return"C";case u.Rg:return"e";case u.rD:return"g";case u.y8:return"c"}},m=i.ZP.div(Captured_templateObject()),h=i.ZP.div(Captured_templateObject1(),e=>e.$selecting?"background-color: palegreen":""),x=i.ZP.div(_templateObject2()),_=i.ZP.div(_templateObject3());function MyCaptured_templateObject(){let e=(0,r._)(["\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-start;\n    height: 50px;\n    width: 100%;\n"]);return MyCaptured_templateObject=function(){return e},e}let MyCaptured=()=>(0,a.jsx)(j,{children:[0,1,2].map(e=>(0,a.jsx)(Captured,{capturedIndex:e},"captured_"+e))}),j=i.ZP.div(MyCaptured_templateObject());function OpCaptured_templateObject(){let e=(0,r._)(["\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-start;\n    height: 50px;\n    width: 100%;\n"]);return OpCaptured_templateObject=function(){return e},e}let OpCaptured=()=>(0,a.jsx)(g,{children:[3,4,5].map(e=>(0,a.jsx)(Captured,{capturedIndex:e},"captured_"+e))}),g=i.ZP.div(OpCaptured_templateObject()),b=[{value:"CC",name:"先手プレイヤー・後手プレイヤー",status:{me:"CLICK",opponent:"CLICK"}},{value:"CS",name:"先手プレイヤー・後手AI",status:{me:"CLICK",opponent:"STRATEGY"}},{value:"SC",name:"先手AI・後手プレイヤー",status:{me:"STRATEGY",opponent:"CLICK"}},{value:"SS",name:"先手AI・後手AI",status:{me:"STRATEGY",opponent:"STRATEGY"}}],useSetting=()=>{let{game:e,stateListener:t,gameListener:n,setModel:r}=(0,l.u)(),[a,i]=(0,c.useState)(e.getSystemViewModel(!0)),[u,s]=(0,c.useState)("CC");(0,c.useEffect)(()=>{let listener=e=>{i(e)};return t.onSystemViewModel(listener),()=>{t.removeSystemViewModelListener(listener)}},[t]),(0,c.useEffect)(()=>{r("multi2_12")},[r]);let o=(0,c.useCallback)(()=>{n.emitGameEvent({type:"start",playType:b.find(e=>e.value===u).status})},[n,u]),p=(0,c.useCallback)(()=>{n.emitGameEvent({type:"reset"})},[n]),d=(0,c.useCallback)(e=>{s(e.target.value)},[]);return{start:o,reset:p,system:a,playTypePullDown:{value:u,onChange:d,options:b}}};function Setting_templateObject(){let e=(0,r._)(["\n    margin: 10px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"]);return Setting_templateObject=function(){return e},e}function Setting_templateObject1(){let e=(0,r._)(["\n    margin: 10px;\n    width: 100px;\n    height: 50px;\n    font-size: 20px;\n"]);return Setting_templateObject1=function(){return e},e}function Setting_templateObject2(){let e=(0,r._)(["\n    margin: 10px;\n    font-size: 20px;\n"]);return Setting_templateObject2=function(){return e},e}function Setting_templateObject3(){let e=(0,r._)(["\n    ",";\n    font-size: 30px\n"]);return Setting_templateObject3=function(){return e},e}function _templateObject4(){let e=(0,r._)(["\n    margin: 10px;\n    width: 400px;\n    height: 30px;\n    font-size: 20px;\n"]);return _templateObject4=function(){return e},e}let Setting=()=>{let{system:e,start:t,reset:n,playTypePullDown:r}=useSetting(),i=turnStringParser(e.turnPlayer),u=e.notStarted?(0,a.jsx)(C,{children:"ゲーム開始ボタンを押してください"}):e.finishStatus.isFinished?(0,a.jsxs)(C,{children:[(0,a.jsx)(S,{$player:e.finishStatus.winner,children:turnStringParser(e.finishStatus.winner)})," の勝ちです"]}):e.thinking?(0,a.jsxs)(C,{children:[(0,a.jsx)(S,{$player:e.turnPlayer,children:i}),"のAIが思考中です..."]}):(0,a.jsxs)(C,{children:[(0,a.jsx)(S,{$player:e.turnPlayer,children:i}),"のターンです"]});return(0,a.jsxs)(O,{children:[u,!e.notStarted&&(0,a.jsx)(y,{onClick:n,children:"Reset"}),(0,a.jsx)(v,{value:r.value,onChange:r.onChange,children:r.options.map(e=>(0,a.jsx)("option",{value:e.value,children:e.name},e.value))}),(0,a.jsx)(y,{onClick:t,children:"Start"})]})},O=i.ZP.div(Setting_templateObject()),y=i.ZP.button(Setting_templateObject1()),C=i.ZP.div(Setting_templateObject2()),S=i.ZP.span(Setting_templateObject3(),e=>"ME"===e.$player?"color: black":"color: red"),v=i.ZP.select(_templateObject4()),turnStringParser=e=>{switch(e){case"ME":return"先手";case"OPPONENT":return"後手"}};function page_templateObject(){let e=(0,r._)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  width: 350px;\n  margin: 0 auto;\n"]);return page_templateObject=function(){return e},e}function Home(){return(0,a.jsxs)(w,{children:[(0,a.jsx)(OpCaptured,{}),(0,a.jsx)(Board,{}),(0,a.jsx)(MyCaptured,{}),(0,a.jsx)(Setting,{})]})}let w=i.ZP.main(page_templateObject())},245:function(e,t,n){"use strict";n.d(t,{Ah:function(){return x},Bu:function(){return b},D_:function(){return s},Dx:function(){return p},E_:function(){return r},IH:function(){return h},OS:function(){return i},Pn:function(){return l},Rg:function(){return _},Vg:function(){return u},Xs:function(){return d},ZI:function(){return c},bD:function(){return m},mh:function(){return f},o:function(){return O},rD:function(){return j},s3:function(){return y},xw:function(){return a},y8:function(){return g},zq:function(){return o}});let r=0,a=1,i=2,u=3,c=4,l=5,s=6,o=7,p=8,d=9,f=10,m=0,h=1,x=2,_=3,j=4,g=5,b=[p,s,o,r,d,r,r,c,r,i,a,u],O=[0,0,0,0,0,0],y=/([0-9]|a){12}[0-2]{6}/},7793:function(e,t,n){"use strict";n.d(t,{y:function(){return s},u:function(){return useSystem}});var r=n(6420),a=n(9792),i=n(9743),u=n.n(i),c=n(4346);let ModelData=class ModelData{static createData(e){let t=e.slice(0,12),n=e.slice(12),a=t.split("").map(e=>"a"!==e?Number(e):10).map(e=>ModelData.createOnehot(e,11)).flat(),i=n.split("").map(e=>Number(e)).map(e=>ModelData.createOnehot(e,3)).flat(),u=(0,r.XeE)([...a,...i],[1,150],"float32");return(0,c.Z)(e).map(()=>new ModelData(e,u))}static createOnehot(e,t){let n=Array(t).fill(0);return n[e]=1,n}getData(){return this.data}getKey(){return this.key}constructor(e,t){this.key=e,this.data=t}};let Model=class Model{static async load(e){let t=await (0,r.FBF)(u().join("/models",e,"model.json"));return new Model(t)}getChooseStrategy(){return e=>{let t=0,n=1/0;for(let r=0;r<e.length;r++){let i=e[r],u=this.predict(i);if(u.isErr())return(0,a.cn)(u.error);let c=u.value;c<n&&(t=r,n=c)}return(0,a.ok)(e[t])}}predict(e){if(this.cache.has(e))return(0,a.ok)(this.cache.get(e));let t=ModelData.createData(e);if(t.isErr())return(0,a.cn)(t.error);let n=this.model.predict(t.value.getData()),r=n.arraySync()[0][0];return this.cache.set(e,r),(0,a.ok)(r)}constructor(e){this.model=e,this.cache=new Map}};var l=n(2265);let s=(0,l.createContext)(void 0),useSystem=()=>{let e=(0,l.useContext)(s),t=(0,l.useCallback)(async t=>{let n=await Model.load(t);e.setModel(n)},[e]);return{game:e.getGame(),gameListener:e.getGameListener(),stateListener:e.getStateListener(),setModel:t}}},4346:function(e,t,n){"use strict";n.d(t,{Z:function(){return keyValidation}});var r=n(245),a=n(9792);let keyValidation=e=>r.s3.test(e)?(0,a.ok)(void 0):(0,a.cn)(Error())},2710:function(e,t,n){"use strict";n.d(t,{Ww:function(){return isLion},XE:function(){return isOpPiece},xb:function(){return isEmpty},y3:function(){return isMyPiece}});var r=n(245);let isMyPiece=e=>e!==r.E_&&e<r.D_,isOpPiece=e=>e>=r.D_,isEmpty=e=>e===r.E_,isLion=e=>e===r.xw||e===r.D_}},function(e){e.O(0,[566,425,938,636,663,498,399,967,807,237,971,472,744],function(){return e(e.s=8927)}),_N_E=e.O()}]);